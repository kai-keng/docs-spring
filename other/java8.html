<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java8 新特性 | Java</title>
    <meta name="generator" content="VuePress 1.5.2">
    
    <meta name="description" content="Just record my learning process">
    <link rel="preload" href="/java-learning/assets/css/0.styles.dcc29016.css" as="style"><link rel="preload" href="/java-learning/assets/js/app.5d6b51f7.js" as="script"><link rel="preload" href="/java-learning/assets/js/2.111de9a5.js" as="script"><link rel="preload" href="/java-learning/assets/js/56.7dff1f27.js" as="script"><link rel="prefetch" href="/java-learning/assets/js/10.9c9c135b.js"><link rel="prefetch" href="/java-learning/assets/js/11.2be87b35.js"><link rel="prefetch" href="/java-learning/assets/js/12.df4b11fe.js"><link rel="prefetch" href="/java-learning/assets/js/13.850ca773.js"><link rel="prefetch" href="/java-learning/assets/js/14.9818e1b4.js"><link rel="prefetch" href="/java-learning/assets/js/15.8c10e7f6.js"><link rel="prefetch" href="/java-learning/assets/js/16.657493af.js"><link rel="prefetch" href="/java-learning/assets/js/17.1a42296f.js"><link rel="prefetch" href="/java-learning/assets/js/18.277c95df.js"><link rel="prefetch" href="/java-learning/assets/js/19.c437b313.js"><link rel="prefetch" href="/java-learning/assets/js/20.a60e5d73.js"><link rel="prefetch" href="/java-learning/assets/js/21.9e39bfa3.js"><link rel="prefetch" href="/java-learning/assets/js/22.444d20df.js"><link rel="prefetch" href="/java-learning/assets/js/23.110deea7.js"><link rel="prefetch" href="/java-learning/assets/js/24.20c962cc.js"><link rel="prefetch" href="/java-learning/assets/js/25.8fe365fe.js"><link rel="prefetch" href="/java-learning/assets/js/26.b6cacd5f.js"><link rel="prefetch" href="/java-learning/assets/js/27.cdc5463d.js"><link rel="prefetch" href="/java-learning/assets/js/28.7323af87.js"><link rel="prefetch" href="/java-learning/assets/js/29.bf15f44e.js"><link rel="prefetch" href="/java-learning/assets/js/3.a3625771.js"><link rel="prefetch" href="/java-learning/assets/js/30.67ab1b11.js"><link rel="prefetch" href="/java-learning/assets/js/31.ac30fe3b.js"><link rel="prefetch" href="/java-learning/assets/js/32.3c5b5d09.js"><link rel="prefetch" href="/java-learning/assets/js/33.490a5238.js"><link rel="prefetch" href="/java-learning/assets/js/34.f345d711.js"><link rel="prefetch" href="/java-learning/assets/js/35.d6a2471e.js"><link rel="prefetch" href="/java-learning/assets/js/36.a72c8103.js"><link rel="prefetch" href="/java-learning/assets/js/37.a3fe2ee9.js"><link rel="prefetch" href="/java-learning/assets/js/38.bf31ccbb.js"><link rel="prefetch" href="/java-learning/assets/js/39.ae33545f.js"><link rel="prefetch" href="/java-learning/assets/js/4.294d6987.js"><link rel="prefetch" href="/java-learning/assets/js/40.27a5ec18.js"><link rel="prefetch" href="/java-learning/assets/js/41.cd99125e.js"><link rel="prefetch" href="/java-learning/assets/js/42.ec60cba7.js"><link rel="prefetch" href="/java-learning/assets/js/43.323d4882.js"><link rel="prefetch" href="/java-learning/assets/js/44.a6b58ea1.js"><link rel="prefetch" href="/java-learning/assets/js/45.94c72277.js"><link rel="prefetch" href="/java-learning/assets/js/46.4ff8ac63.js"><link rel="prefetch" href="/java-learning/assets/js/47.eef91484.js"><link rel="prefetch" href="/java-learning/assets/js/48.cec41730.js"><link rel="prefetch" href="/java-learning/assets/js/49.f6f9cdcc.js"><link rel="prefetch" href="/java-learning/assets/js/5.b0cf9871.js"><link rel="prefetch" href="/java-learning/assets/js/50.4c5fae32.js"><link rel="prefetch" href="/java-learning/assets/js/51.76b68e60.js"><link rel="prefetch" href="/java-learning/assets/js/52.3cc2ce5e.js"><link rel="prefetch" href="/java-learning/assets/js/53.b807dfc4.js"><link rel="prefetch" href="/java-learning/assets/js/54.889713e6.js"><link rel="prefetch" href="/java-learning/assets/js/55.a78f53f0.js"><link rel="prefetch" href="/java-learning/assets/js/57.1efe9b4d.js"><link rel="prefetch" href="/java-learning/assets/js/58.88e17ec5.js"><link rel="prefetch" href="/java-learning/assets/js/59.8340535c.js"><link rel="prefetch" href="/java-learning/assets/js/6.d3a008d4.js"><link rel="prefetch" href="/java-learning/assets/js/60.dfc655d9.js"><link rel="prefetch" href="/java-learning/assets/js/61.132c16a9.js"><link rel="prefetch" href="/java-learning/assets/js/62.d42b7b79.js"><link rel="prefetch" href="/java-learning/assets/js/63.a2e1b617.js"><link rel="prefetch" href="/java-learning/assets/js/64.cc903752.js"><link rel="prefetch" href="/java-learning/assets/js/65.a27baa02.js"><link rel="prefetch" href="/java-learning/assets/js/66.cd6721f2.js"><link rel="prefetch" href="/java-learning/assets/js/67.9ace33a4.js"><link rel="prefetch" href="/java-learning/assets/js/7.49b4ad71.js"><link rel="prefetch" href="/java-learning/assets/js/8.2ce45783.js"><link rel="prefetch" href="/java-learning/assets/js/9.ae971a1c.js">
    <link rel="stylesheet" href="/java-learning/assets/css/0.styles.dcc29016.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/java-learning/" class="home-link router-link-active"><!----> <span class="site-name">Java</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://kai-keng.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://kai-keng.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  主站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/java-learning/spring-boot/" class="sidebar-heading clickable"><span>Spring Boot</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/java-learning/spring-cloud/" class="sidebar-link">Spring Cloud</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/java-learning/mysql/" class="sidebar-heading clickable"><span>MySQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/java-learning/collection/" class="sidebar-heading clickable"><span>集合框架</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/java-learning/jvm/" class="sidebar-heading clickable"><span>JVM</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/java-learning/multi-thread/" class="sidebar-heading clickable"><span>多线程</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/java-learning/design-pattern/" class="sidebar-heading clickable"><span>设计模式</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/java-learning/internet/" class="sidebar-link">网络</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/java-learning/other/" class="sidebar-heading clickable router-link-active open"><span>其他</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-learning/other/java8.html" aria-current="page" class="active sidebar-link">Java8 新特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java-learning/other/java8.html#lambda" class="sidebar-link">Lambda</a></li><li class="sidebar-sub-header"><a href="/java-learning/other/java8.html#方法引用" class="sidebar-link">方法引用</a></li><li class="sidebar-sub-header"><a href="/java-learning/other/java8.html#函数式接口" class="sidebar-link">函数式接口</a></li><li class="sidebar-sub-header"><a href="/java-learning/other/java8.html#stream（流）" class="sidebar-link">Stream（流）</a></li><li class="sidebar-sub-header"><a href="/java-learning/other/java8.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li></ul></section></li><li><a href="/java-learning/materials/" class="sidebar-link">相关资料</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="java8-新特性"><a href="#java8-新特性" class="header-anchor">#</a> Java8 新特性</h1> <p>Java8 版本发布了许多的新特性，而且是非常实用的新特性，利用好这些新特性能够加快我们的编程效率，让代码更加的美观简洁。</p> <h2 id="lambda"><a href="#lambda" class="header-anchor">#</a> Lambda</h2> <p>Lambda 表达式可以理解为一种匿名函数的写法，类似 JavaScript 中的箭头函数。分为<strong>参数</strong>、<strong>箭头</strong>与<strong>函数体</strong>3部分，比如这个 Lambda 表达式：</p> <p><code>(a, b) -&gt; { System.out.println(a + b); }</code></p> <ul><li><p>参数：表达式中 <code>(a, b)</code> 为参数部分，若参数只有一个时可以简写为 <code>a -&gt; { System.out.println(a); }</code>，也可不传参数留空括号 <code>()</code>。</p></li> <li><p>箭头：即中间的箭头 <code>-&gt;</code>。</p></li> <li><p>函数体：函数体指箭头后面的部分 <code>{ System.out.println(a + b); }</code>。当函数体内直接返回某个值时 <code>a -&gt; { return a; }</code>，可以省略外面的大括号，直接写作 <code>a -&gt; a</code>。</p></li></ul> <h3 id="lambda-表达式注意点"><a href="#lambda-表达式注意点" class="header-anchor">#</a> Lambda 表达式注意点</h3> <ul><li><p>Lambda 表达式中若引用局部变量，那么该局部变量必须用 final 修饰（若你没有使用 final 修饰，编译器会默认隐式的帮你加上）。</p> <p>因为局部变量是存放在栈内存中的，是线程私有的，当线程执行完成以后 GC 就会回收掉。但是 Lambda 表达式会被处理成使用额外的线程去执行，与创建局部变量的线程非同一线程，若拥有变量的线程执行完毕被销毁了，Lambda 表达式将无法获取到该变量。所以 Lambda 表达式中使用的局部变量都是原变量的一个拷贝，为了确保拷贝值与原值一定相同，所以要声明为 final 类型，避免修改。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">// 表达式中的i编译器会报错，要求你创建一个使用fianl修饰的变量</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 若去掉改行赋值，编译器不会报错，i变量会被隐式的加上final</span>
    i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="方法引用"><a href="#方法引用" class="header-anchor">#</a> 方法引用</h2> <p>方法引用可以看做是一种简化的 Lambda 表达式，当你的 Lambda 表达式只是简单的调用某个方法时，可以使用方法引用代替。比如：</p> <p>Lambda 写法：<code>(Integer i) -&gt; i.toString()</code></p> <p>方法引用写法：<code>Object::toString</code></p> <blockquote><p>注意：此处不写成 <code>Integer::toString</code> 或 <code>i::toString</code>，编译器会报错。因为 Integer 中有个静态的 toString 方法，也有
实例的 toString 方法，编译器无法确定使用哪个，所以会报错。</p></blockquote> <p>方法引用共有三种不同的形式，分别是：</p> <ul><li><p><strong>类::静态方法</strong>：<code>Integer::compare</code></p></li> <li><p><strong>类::非静态方法</strong>：<code>Object::toString</code></p></li> <li><p><strong>实例::非静态方法</strong>：<code>i::equals</code></p></li></ul> <h2 id="函数式接口"><a href="#函数式接口" class="header-anchor">#</a> 函数式接口</h2> <p>函数式接口指的是之定义了一个抽象方法的接口，并使用 <code>@FunctionalInterface</code> 标记。比如：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Comparator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>
  <span class="token keyword">int</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token class-name">T</span> o1<span class="token punctuation">,</span> <span class="token class-name">T</span> o2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>注意：接口中的默认（default）方法并不属于抽象方法，且用于重写超类 Object 类中的方法也不属于抽象方法，比如 equals 方法。</p></blockquote> <p>在 JDK 中内置了一些函数式接口供我们直接使用（列举部分），Lambda 表达式则可以灵活运用于函数式接口：</p> <ul><li><p>Predicate：定义了一个 <code>test()</code> 的抽象方法，接受泛型 T 对象，并返回一个 boolean。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span>t <span class="token operator">-&gt;</span> t<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Predicate</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> predicate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>predicate<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Consumer：定义了一个 <code>accept()</code> 的抽象方法，接受泛型 T 对象，没有返回（void）。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span>t <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Consumer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> consumer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    consumer<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Function：定义了一个 <code>apply()</code> 的抽象方法，接受泛型 T 对象，并返回一个泛型 R 的对象。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">test</span><span class="token punctuation">(</span>t <span class="token operator">-&gt;</span> t<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> function<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>function<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token string">&quot;is OK?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Supplier：定义了一个 <code>get()</code> 的抽象方法，没有传入参数，会返回一个泛型 T 的对象。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code>  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">void</span> <span class="token function">testLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token class-name">Supplier</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> supplier<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>supplier<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>Runnable：定义了一个 <code>run()</code> 的抽象方法，没有传入参数也没有返回值，用于传入线程执行 <code>run()</code> 的具体实现方法。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    t<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="stream（流）"><a href="#stream（流）" class="header-anchor">#</a> Stream（流）</h2> <p>Stream 是 Java8 中非常重要的一个概念，因为在我们日常开发中，集合是使用非常频繁的，但是往往集合的遍历、过滤、排序操作并不是那么的简单，写完可能就是大段的代码。但是 Straam 的出现大大的简化了我们的写法，让代码的可读性提高了很多，先简单看一个流操作：</p> <p>需求：取出集合中的偶数并倒序排列</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 普通写法</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    result<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 流写法</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对比上面的普通写法，使用流的链式写法直接一行搞定。</p> <h3 id="流的操作"><a href="#流的操作" class="header-anchor">#</a> 流的操作</h3> <p>流的操作可以拆分为3个部分：获取流 -&gt; 中间操作 -&gt; 终端操作。</p> <p>上面的流操作：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取流</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 中间操作</span>
    <span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 中间操作</span>
    <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 终端操作</span>
</code></pre></div><p>中间操作是指操作完成以后返回的还是 Stream 流对象，还能继续处理的方法，终端操作是指操作完成以后无返回值或者返回值不为 Stream 的方法。</p> <p><strong>中间操作</strong>：</p> <table><thead><tr><th>操作</th> <th>返回类型</th> <th>操作参数</th> <th>描述</th></tr></thead> <tbody><tr><td>filter</td> <td>Stream</td> <td>Predicate</td> <td>过滤操作，过滤掉返回值为 false 的值</td></tr> <tr><td>map</td> <td>Stream</td> <td>Funcation&lt;T, R&gt;</td> <td>映射操作，将每项值映射返回为另一个值</td></tr> <tr><td>sorted</td> <td>Stream</td> <td>Comparator</td> <td>排序操作</td></tr> <tr><td>distinct</td> <td>Stream</td> <td></td> <td>去重操作</td></tr> <tr><td>skip</td> <td>Stream</td> <td>long</td> <td>跳过指定条数的值</td></tr> <tr><td>limit</td> <td>Stream</td> <td>long</td> <td>保留指定数据操作，保留前 n 条数据</td></tr> <tr><td>flatMap</td> <td>Stream</td> <td>Funcation&lt;T, Stream&gt;</td> <td>传入对象，转化为流，常用来降低集合或数组嵌套层级</td></tr></tbody></table> <p><strong>终端操作</strong>：</p> <table><thead><tr><th>操作</th> <th>返回类型</th> <th>操作参数</th> <th>描述</th></tr></thead> <tbody><tr><td>forEach</td> <td>void</td> <td>Consumer</td> <td>循环操作流</td></tr> <tr><td>count</td> <td>long</td> <td></td> <td>计数</td></tr> <tr><td>collect</td> <td>R</td> <td>Collector&lt;T, A, R&gt;</td> <td>收集器，收集流结果为集合</td></tr> <tr><td>anyMatch</td> <td>boolean</td> <td>Predicate</td> <td>判断是否有任意符合条件的元素返回 true，反之 false</td></tr> <tr><td>noneMatch</td> <td>boolean</td> <td>Predicate</td> <td>判断所有的元素都不符合条件返回 true，反之 false</td></tr> <tr><td>allMatch</td> <td>boolean</td> <td>Predicate</td> <td>判断所有的元素都符合条件返回 true，反之 false</td></tr> <tr><td>findAny</td> <td>Optional</td> <td></td> <td>返回任意一个元素，串行一般返回第一个，并行则不定</td></tr> <tr><td>findFirst</td> <td>Optional</td> <td></td> <td>返回第一个元素</td></tr> <tr><td>reduce</td> <td>Optional</td> <td>BinaryOperator</td> <td>合并操作，将元素两两进行计算并获取一个返回值，如此累加计算直至最后一项</td></tr></tbody></table> <h3 id="操作详细介绍"><a href="#操作详细介绍" class="header-anchor">#</a> 操作详细介绍</h3> <h4 id="获取流"><a href="#获取流" class="header-anchor">#</a> 获取流</h4> <p>常用的流的创建方式有以下几种：</p> <ul><li><p>Collection.stream：集合接口的默认方法。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Stream.of()</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token class-name">Stream</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> stream <span class="token operator">=</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>Arrays.stream()</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token class-name">IntStream</span> stream <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="中间操作"><a href="#中间操作" class="header-anchor">#</a> 中间操作</h4> <p><strong>流的起始集合</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>filter</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 过滤奇数，获取偶数，保留filter方法中返回true的元素</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>map</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 将所有的值都乘以2，map即对每个元素做一定的处理，并返回新的元素</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>sorted</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 倒序排列</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sorted</span><span class="token punctuation">(</span><span class="token class-name">Comparator</span><span class="token punctuation">.</span><span class="token function">comparingInt</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> <span class="token operator">-</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>distinct</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 去重操作</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>skip</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 跳过（舍弃）前5条数据</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>limit</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 只保留前5条数据，舍弃后4条</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>flatMap</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// flatMap稍微复杂点，单独展示个例子</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">void</span> <span class="token function">testLambda</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token operator">::</span><span class="token function">stream</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 执行结果</span>
<span class="token comment">// [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</code></pre></div><h4 id="终端操作"><a href="#终端操作" class="header-anchor">#</a> 终端操作</h4> <p><strong>流的起始集合</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>forEach</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 使用forEach循环打印元素</span>
list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>count</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 计数</span>
list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>anyMatch</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 判断是否有任意一个大于0的元素</span>
list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">anyMatch</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>noneMatch</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 判断是否没有一个大于0的元素</span>
list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">noneMatch</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>allMatch</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 判断是否所有元素都大于0</span>
list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">allMatch</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>findAny</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 任意获取一个元素</span>
list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findAny</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>findFirst</strong>：</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 任意获取一个元素</span>
list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>此处 <code>findAny()</code> 与 <code>findFirst()</code> 需要注意一个点是如果使用 <code>get()</code> 获取元素，当流为空的时候，会抛出 <code>java.util.NoSuchElementException</code> 异常，但是使用 <code>list.stream().findFirst().orElse(null);</code> 的话，没有元素则会返回 null 值，也可返回你需要的指定值。</p></blockquote> <p><strong>reduce</strong>：</p> <p>reduce 较为复杂点，共有三个重载方法：</p> <ul><li><p><code>T reduce(T identity, BinaryOperator&lt;T&gt; accumulator);</code></p> <p>该方法传入两个参数，参数 <code>identity</code> 表示传入的起始值，参数 <code>accumulator</code> 是计算方法，使用两个元素进行计算，初始使用起始值与第一个值计算，然后使用计算结果代替起始值，继续与下一个值计算，最终得到一个结果。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 使用reduce累加计算，起始0</span>
<span class="token class-name">Integer</span> i <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结果</span>
<span class="token comment">// 45</span>
</code></pre></div></li> <li><p><code>Optional&lt;T&gt; reduce(BinaryOperator&lt;T&gt; accumulator);</code></p> <p>该方法与上一方法的区别在于不需要传入起始值，直接使用第一个元素作为起始值计算，而且返回结果为 <code>Optional&lt;T&gt;</code>，与 <code>findAny</code> 方法返回值一致，可以使用 <code>get()</code> 与 <code>orElse(T other)</code> 方法来获取值。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 使用reduce累加计算，无起始值</span>
<span class="token class-name">Integer</span> i <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结果</span>
<span class="token comment">// 45</span>
</code></pre></div></li> <li><p><code>&lt;U&gt; U reduce(U identity, BiFunction&lt;U, ? super T, U&gt; accumulator, BinaryOperator&lt;U&gt; combiner);</code></p> <p>该方法前两个参数类似第一个重载，分别是起始值和累加器，但是这个方法额外多了第三个参数，第三个参数的作用是当你使用 <code>parallelStream()</code> 并发执行 reduce 的时候，第三个参数即是用来将两个不同线程累加的结果合并的。</p> <p>除了参数的区别以外，这个方法最大的区别在于<strong>返回值不需要与传入累加器的值得类型一致</strong>，即可以传入一个 Integer 类型的数组，然后我返回一个 String 值，这在前两个方法是不被允许的。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 异步计算reduce方法，计算方法为字符串拼接</span>
<span class="token class-name">String</span> s <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">parallelStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">,</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 结果</span>
<span class="token comment">// &quot;123456789&quot;</span>
</code></pre></div></li></ul> <p><strong>collect（收集器）</strong>：</p> <p>收集器是用来将前面的处理结果收集处理为集合的，共有两个重载方法：</p> <ul><li><p><code>&lt;R, A&gt; R collect(Collector&lt;? super T, A, R&gt; collector);</code></p> <p>这个为最常用的收集器方法，可以传入一个 <code>Collector</code>，一般即是直接调用 <code>Collectors</code> 类中的静态方法。</p> <div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 将结果转化为list</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 计数</span>
<span class="token class-name">Long</span> count <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">counting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-JAVA extra-class"><pre class="language-java"><code><span class="token comment">// 求和</span>
<span class="token class-name">Integer</span> sum <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token class-name">Collectors</span><span class="token punctuation">.</span><span class="token function">summingInt</span><span class="token punctuation">(</span>i <span class="token operator">-&gt;</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Collectors</code> 下面还有很多的方法都可以使用，具体情况可以依据自己需求使用。</p></li> <li><p><code>&lt;R&gt; R collect(Supplier&lt;R&gt; supplier, BiConsumer&lt;R, ? super T&gt; accumulator, BiConsumer&lt;R, R&gt; combiner);</code></p> <p>该方法与 <code>reduce</code> 方法有些类似，使用不多。</p></li></ul> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ol><li><a href="https://juejin.im/post/6861849472499417096#heading-7" target="_blank" rel="noopener noreferrer">这篇最全 Java 8 讲解，有没有之一先看后说！<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java-learning/internet/" class="prev">
        网络
      </a></span> <span class="next"><a href="/java-learning/materials/">
        相关资料
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/java-learning/assets/js/app.5d6b51f7.js" defer></script><script src="/java-learning/assets/js/2.111de9a5.js" defer></script><script src="/java-learning/assets/js/56.7dff1f27.js" defer></script>
  </body>
</html>
